webpackJsonp([2,0],{0:function(t,e,s){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}s(200);var i=s(3),r=u(i),o=s(179),a=u(o);s(201);var l=s(219),c=u(l),f=s(25),d=n(f),v=s(4),m=s(61),_=v.Keys.SETROOMINFO;r.default.use(a.default),new r.default({store:d.default,el:"#app",template:"<App/>",components:{App:c.default},created:function(){var t=this;(0,m.getCxt)().createIo(this,function(e){d.busCxt.init(),t.$store.dispatch(_,e),(0,m.getCxt)().refUsers(function(t){d.busCxt.userCxt.refUsers(t)})})}})},4:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function i(t,e){return o.merge(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Keys=void 0,e.merge=i;var r=s(209),o=u(r),a=s(127),l=n(a);e.Keys=l.default},25:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function u(){return h}Object.defineProperty(e,"__esModule",{value:!0}),e.busCxt=void 0,e.getBusCxt=u;var i=s(36),r=n(i),o=s(3),a=n(o),l=s(124),c=n(l),f=s(126),d=n(f),v=s(123),m=n(v),_=s(121),p=n(_),h=new p.default,y=new c.default,g=new d.default(h.userCxt),M=new m.default,x={state:null,getters:null,mutations:null,actions:null};y.use(x),g.use(x),M.use(x),a.default.use(r.default);var C=new r.default.Store(x);e.default=C;e.busCxt=h},61:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function i(){return null==d&&(d=new l.default(f,c,o)),d}Object.defineProperty(e,"__esModule",{value:!0}),e.getCxt=i;var r=s(214),o=u(r),a=s(119),l=n(a),c=s(120),f="http://localhost:9001/",d=null},119:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=s(8),i=n(u),r=s(9),o=n(r),a=function(){function t(e,s,n){(0,i.default)(this,t),this.url=e,this.io=n,this.keys=s,this.vm=null,this.socket=null,this.userId=1,this.name="客高端注册",this.roomInfo=null}return(0,o.default)(t,[{key:"createIo",value:function(t,e){this.vm=t;var s=this.io.connect(this.url),n=this;this.socket=s,s.on(this.keys.emit.sendRooms,function(t){n.roomInfo=t,e(t)})}},{key:"registerUser",value:function(t,e){this.userId=t,this.name=e,this.socket.emit(this.keys.client.registerUser,this.userId,this.name)}},{key:"newUser",value:function(t){this.socket.on(this.keys.emit.newUser,t)}},{key:"sendMsg",value:function(t){this.socket.emit(this.keys.client.newMsg,t)}},{key:"reciveMsg",value:function(t){this.socket.on(this.keys.emit.notifyMsg,function(e){t(e)})}},{key:"closeConn",value:function(){this.socket.emit(this.keys.client.closeConn)}},{key:"refUsers",value:function(t){this.socket.on(this.keys.emit.refUsers,function(e){t(e)})}}]),t}();e.default=a},120:function(t,e){"use strict";t.exports={emit:{sendRooms:"send.roomCollection",newUser:"send.newUser",notifyMsg:"notify.msg",refUsers:"refresh.users"},client:{registerUser:"send.register.user",newMsg:"send.msg",closeConn:"send.closeConn"}}},121:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=s(8),i=n(u),r=s(9),o=n(r),a=s(61),l=s(125),c=n(l),f=s(122),d=n(f),v=function(){function t(){(0,i.default)(this,t),this.servicesCxt=(0,a.getCxt)(),this.userCxt=new c.default(this.servicesCxt),this.msgCxt=new d.default(this.servicesCxt)}return(0,o.default)(t,[{key:"init",value:function(){this.userCxt.init(),this.msgCxt.init()}}]),t}();e.default=v},122:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=s(8),i=n(u),r=s(9),o=n(r),a=s(4),l=function(){function t(e){(0,i.default)(this,t),this.cxt=e}return(0,o.default)(t,[{key:"init",value:function(){var t=this;this.cxt.reciveMsg(function(e){e.userId!==t.cxt.userId&&t.cxt.vm.$store.dispatch(a.Keys.ADDMSG,e)})}},{key:"sendMsg",value:function(t){t.userId=this.cxt.userId,t.userName=this.cxt.name,t.type="send",this.cxt.vm.$store.dispatch(a.Keys.ADDMSG,t),this.cxt.sendMsg(t)}}]),t}();e.default=l},123:function(t,e,s){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(37),r=u(i),o=s(8),a=u(o),l=s(9),c=u(l),f=s(4),d=n(f),v=function(){function t(){(0,a.default)(this,t)}return(0,c.default)(t,[{key:"use",value:function(t){this.initStore(t)}},{key:"initStore",value:function(t){var e={msgs:[]},s=(0,r.default)({},d.Keys.GETNEWMSG,function(t){return t.msgs}),n=(0,r.default)({},d.Keys.ADDMSG,function(t,e){t.msgs.push(e)}),u=(0,r.default)({},d.Keys.ADDMSG,function(t,e){t.commit(d.Keys.ADDMSG,e)});t.state=d.merge(t.state,e),t.getters=d.merge(t.getters,s),t.mutations=d.merge(t.mutations,n),t.actions=d.merge(t.actions,u)}}]),t}();e.default=v},124:function(t,e,s){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(8),r=u(i),o=s(9),a=u(o),l=s(37),c=u(l),f=s(4),d=n(f),v={currentRoom:null},m=(0,c.default)({},d.Keys.GETROOMINFO,function(t){return t.currentRoom}),_=(0,c.default)({},d.Keys.SETROOMINFO,function(t,e){t.currentRoom=e}),p=(0,c.default)({},d.Keys.SETROOMINFO,function(t,e){t.commit(d.Keys.SETROOMINFO,e)}),h=function(){function t(){(0,r.default)(this,t)}return(0,a.default)(t,[{key:"use",value:function(t){t.state=d.merge(t.state,v),t.getters=d.merge(t.getters,m),t.mutations=d.merge(t.mutations,_),t.actions=d.merge(t.actions,p)}}]),t}();e.default=h},125:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=s(8),i=n(u),r=s(9),o=n(r),a=s(4),l=function(){function t(e){(0,i.default)(this,t),this.cxt=e}return(0,o.default)(t,[{key:"init",value:function(){var t=this;this.cxt.newUser(function(e){t.cxt.vm.$store.dispatch(a.Keys.ADDUSER,e)})}},{key:"registerUser",value:function(t,e){this.cxt.registerUser(t,e)}},{key:"closeConn",value:function(){this.cxt.closeConn()}},{key:"refUsers",value:function(t){this.cxt.vm.$store.dispatch(a.Keys.REFUSERS,t)}}]),t}();e.default=l},126:function(t,e,s){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(37),r=u(i),o=s(8),a=u(o),l=s(9),c=u(l),f=s(4),d=n(f),v=function(){function t(e){(0,a.default)(this,t),this.busCxt=e}return(0,c.default)(t,[{key:"use",value:function(t){this.initStroe(t)}},{key:"initStroe",value:function(t){var e,s,n={users:[]},u=(0,r.default)({},d.Keys.GETUSERS,function(t){return t.users}),i=(e={},(0,r.default)(e,d.Keys.ADDUSER,function(t,e){t.users.push(e)}),(0,r.default)(e,d.Keys.REFUSERS,function(t,e){t.users=e}),e),o=(s={},(0,r.default)(s,d.Keys.ADDUSER,function(t,e){t.commit(d.Keys.ADDUSER,e)}),(0,r.default)(s,d.Keys.REFUSERS,function(t,e){t.commit(d.Keys.REFUSERS,e)}),s);t.state=d.merge(t.state,n),t.getters=d.merge(t.getters,u),t.mutations=d.merge(t.mutations,i),t.actions=d.merge(t.actions,o)}}]),t}();e.default=v},127:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={SETROOMINFO:"setRoomInfo",GETROOMINFO:"getRoomInfo",ADDUSER:"addUser",GETUSERS:"getUsers",ADDMSG:"addMsg",GETNEWMSG:"getNewMsg",REFUSERS:"refUsers"}},128:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=s(20),i=n(u),r=s(36),o=s(4),a=s(220),l=n(a),c=s(221),f=n(c),d=s(25),v=o.Keys.GETROOMINFO;e.default={name:"app",components:{HChat:l.default,Login:f.default},computed:(0,i.default)({},(0,r.mapGetters)([v])),methods:{loginOut:function(){(0,d.getBusCxt)().userCxt.closeConn(),window.close()}}}},129:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=s(20),i=n(u),r=s(222),o=n(r),a=s(223),l=n(a),c=s(36),f=s(4),d=f.Keys.GETUSERS;e.default={name:"HChat",components:{MsgList:o.default,MsgWr:l.default},computed:(0,i.default)({},(0,c.mapGetters)([d]))}},130:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(25);e.default={name:"Login",data:function(){return{userId:null,userName:null,show:!0}},methods:{loginPro:function(){this.show=!1,(0,n.getBusCxt)().userCxt.registerUser(this.userId,this.userName)}}}},131:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=s(20),i=n(u),r=s(36),o=s(4),a=o.Keys.GETNEWMSG;e.default={name:"MsgList",computed:(0,i.default)({},(0,r.mapGetters)([a]))}},132:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(25);e.default={name:"MsgWriter",data:function(){return{cont:""}},methods:{add:function(){var t={cont:this.cont};(0,n.getBusCxt)().msgCxt.sendMsg(t)}}}},200:function(t,e){},201:function(t,e){},202:function(t,e){},203:function(t,e){},204:function(t,e){},205:function(t,e){},206:function(t,e){},219:function(t,e,s){s(206);var n=s(24)(s(128),s(228),null,null);t.exports=n.exports},220:function(t,e,s){s(205);var n=s(24)(s(129),s(227),"data-v-21b7362e",null);t.exports=n.exports},221:function(t,e,s){s(203);var n=s(24)(s(130),s(225),null,null);t.exports=n.exports},222:function(t,e,s){s(202);var n=s(24)(s(131),s(224),"data-v-104685e0",null);t.exports=n.exports},223:function(t,e,s){s(204);var n=s(24)(s(132),s(226),"data-v-1d02c4b5",null);t.exports=n.exports},224:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"msg-cont"},t._l(t.getNewMsg,function(e){return s("li",{class:{"msg-cont-send":"send"==e.type}},[s("span",{staticClass:"msg-cont-item"},[t._v(t._s(e.userName)+": "+t._s(e.cont))])])}))])},staticRenderFns:[]}},225:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-dialog",class:{show:t.show}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[t._v("\n            登录\n        ")]),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"col-xs-4"},[t._v("用户编号：")]),t._v(" "),s("div",{staticClass:"col-xs-8"},[s("el-input",{model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1),t._v(" "),s("div",{staticClass:"col-xs-4"},[t._v("用户名：")]),t._v(" "),s("div",{staticClass:"col-xs-8"},[s("el-input",{model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1)]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",on:{click:t.loginPro}},[t._v("登录")])])])])},staticRenderFns:[]}},226:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100%",position:"relative"}},[s("el-input",{attrs:{type:"textarea",row:8},model:{value:t.cont,callback:function(e){t.cont=e},expression:"cont"}}),t._v(" "),s("div",{staticClass:"btn-group btn-group-custom"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.add}},[t._v("添加")])])],1)},staticRenderFns:[]}},227:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap"},[s("div",{staticClass:"wrap-main"},[s("div",{staticClass:"msg-list"},[s("MsgList")],1),t._v(" "),s("div",{staticClass:"msg-input"},[s("MsgWr")],1)]),t._v(" "),s("div",{staticClass:"wrap-left"},[s("ul",{staticClass:"list-group"},t._l(t.getUsers,function(e){return s("li",{staticClass:"list-group-item"},[t._v("\n                "+t._s(e.name)+"\n            ")])}))])])},staticRenderFns:[]}},228:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"head"},[s("div",{staticClass:"col-xs-10 head-title"},[null!=t.getRoomInfo?s("span",[t._v("当前房间名称："+t._s(t.getRoomInfo.name))]):t._e()]),t._v(" "),s("div",{staticClass:"col-xs-2 head-toolbar"},[s("button",{staticClass:"btn btn-primary",on:{click:t.loginOut}},[t._v("登出")])])]),t._v(" "),s("div",{staticClass:"cont"},[s("HChat"),t._v(" "),s("Login")],1)])},staticRenderFns:[]}},231:function(t,e){}});
//# sourceMappingURL=app.e7a01a689bedb796feee.js.map